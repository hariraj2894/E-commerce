{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminProducts=()=>{const[products,setProducts]=useState([]);// Ensure products is initialized as an array\nconst[loading,setLoading]=useState(true);const artistId=localStorage.getItem('artid');// Ensure 'artid' is set properly during login\nuseEffect(()=>{if(!artistId){console.error('Artist ID not found');setLoading(false);return;}const fetchProducts=async()=>{try{const response=await axios.get(\"http://localhost:4000/api/productAdmin/\".concat(artistId));setProducts(Array.isArray(response.data)?response.data:[]);}catch(error){console.error('Error fetching products:',error);}finally{setLoading(false);}};fetchProducts();},[artistId]);// Re-run if artistId changes\nif(loading){return/*#__PURE__*/_jsx(\"h2\",{children:\"Loading...\"});}if(!products.length){return/*#__PURE__*/_jsx(\"h2\",{children:\"No products found\"});// Handle case where no products are found\n}const handleDelete=async id=>{try{await axios.delete(\"http://localhost:4000/api/product/\".concat(id));setProducts(products.filter(product=>product._id!==id));alert('Product deleted successfully!');}catch(error){console.error('Error deleting product:',error);alert('An error occurred while deleting the product.');}};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'40px',backgroundColor:'#f4f4f9',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:'2rem',color:'#333'},children:\"Product List\"}),/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse',marginTop:'20px'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{padding:'10px',border:'1px solid #ccc'},children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'10px',border:'1px solid #ccc'},children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'10px',border:'1px solid #ccc'},children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'10px',border:'1px solid #ccc'},children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.map(product=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{padding:'10px',border:'1px solid #ccc'},children:product.name}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'10px',border:'1px solid #ccc'},children:product.description}),/*#__PURE__*/_jsxs(\"td\",{style:{padding:'10px',border:'1px solid #ccc'},children:[\"\\u20B9\",product.price]}),/*#__PURE__*/_jsxs(\"td\",{style:{padding:'10px',border:'1px solid #ccc'},children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard/edit-product/\".concat(product._id),style:{marginRight:'10px'},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(product._id),style:{padding:'5px 10px',backgroundColor:'#e74c3c',color:'#fff',border:'none',cursor:'pointer'},children:\"Delete\"})]})]},product._id))})]})]});};export default AdminProducts;","map":{"version":3,"names":["React","useEffect","useState","axios","Link","jsx","_jsx","jsxs","_jsxs","AdminProducts","products","setProducts","loading","setLoading","artistId","localStorage","getItem","console","error","fetchProducts","response","get","concat","Array","isArray","data","children","length","handleDelete","id","delete","filter","product","_id","alert","style","padding","backgroundColor","textAlign","fontSize","color","width","borderCollapse","marginTop","border","map","name","description","price","to","marginRight","onClick","cursor"],"sources":["C:/Users/Admin/Downloads/new codes/Ecomerence/src/components/Admin/AdminProducts.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst AdminProducts = () => {\r\n  const [products, setProducts] = useState([]); // Ensure products is initialized as an array\r\n  const [loading, setLoading] = useState(true);\r\n  const artistId = localStorage.getItem('artid'); // Ensure 'artid' is set properly during login\r\n  \r\n  useEffect(() => {\r\n    if (!artistId) {\r\n      console.error('Artist ID not found');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const fetchProducts = async () => {\r\n      try {\r\n        const response = await axios.get(`http://localhost:4000/api/productAdmin/${artistId}`);\r\n        setProducts(Array.isArray(response.data) ? response.data : []);\r\n      } catch (error) {\r\n        console.error('Error fetching products:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchProducts();\r\n  }, [artistId]); // Re-run if artistId changes\r\n  \r\n  if (loading) {\r\n    return <h2>Loading...</h2>;\r\n  }\r\n\r\n  if (!products.length) {\r\n    return <h2>No products found</h2>; // Handle case where no products are found\r\n  }\r\n\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      await axios.delete(`http://localhost:4000/api/product/${id}`);\r\n      setProducts(products.filter((product) => product._id !== id));\r\n      alert('Product deleted successfully!');\r\n    } catch (error) {\r\n      console.error('Error deleting product:', error);\r\n      alert('An error occurred while deleting the product.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: '40px', backgroundColor: '#f4f4f9', textAlign: 'center' }}>\r\n      <h2 style={{ fontSize: '2rem', color: '#333' }}>Product List</h2>\r\n      <table style={{ width: '100%', borderCollapse: 'collapse', marginTop: '20px' }}>\r\n        <thead>\r\n          <tr>\r\n            <th style={{ padding: '10px', border: '1px solid #ccc' }}>Name</th>\r\n            <th style={{ padding: '10px', border: '1px solid #ccc' }}>Description</th>\r\n            <th style={{ padding: '10px', border: '1px solid #ccc' }}>Price</th>\r\n            <th style={{ padding: '10px', border: '1px solid #ccc' }}>Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {products.map((product) => (\r\n            <tr key={product._id}>\r\n              <td style={{ padding: '10px', border: '1px solid #ccc' }}>{product.name}</td>\r\n              <td style={{ padding: '10px', border: '1px solid #ccc' }}>{product.description}</td>\r\n              <td style={{ padding: '10px', border: '1px solid #ccc' }}>â‚¹{product.price}</td>\r\n              <td style={{ padding: '10px', border: '1px solid #ccc' }}>\r\n                <Link to={`/dashboard/edit-product/${product._id}`} style={{ marginRight: '10px' }}>Edit</Link>\r\n                <button\r\n                  onClick={() => handleDelete(product._id)}\r\n                  style={{\r\n                    padding: '5px 10px',\r\n                    backgroundColor: '#e74c3c',\r\n                    color: '#fff',\r\n                    border: 'none',\r\n                    cursor: 'pointer',\r\n                  }}\r\n                >\r\n                  Delete\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminProducts;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
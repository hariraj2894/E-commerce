{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function UserProfile(){const[userData,setUserData]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const id=localStorage.getItem('user');// The logged-in user's ID\nuseEffect(()=>{const fetchUserData=async()=>{try{const response=await axios.get(\"http://localhost:4000/api/userprofile/\".concat(id),{headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('token'))// Authorization header with JWT\n}});setUserData(response.data);console.log(response.data);}catch(err){var _err$response,_err$response$data;console.error('Error fetching user data:',err);setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Failed to load user profile. Please try again later.');}finally{setLoading(false);}};if(id){fetchUserData();}},[id]);const styles={container:{width:'100%',maxWidth:'500px',margin:'40px auto',marginTop:'100px',padding:'30px',background:'#fff',borderRadius:'16px',boxShadow:'0 10px 20px rgba(0, 0, 0, 0.1)',textAlign:'center',fontFamily:'Arial, sans-serif'},header:{marginBottom:'20px'},userName:{fontSize:'28px',fontWeight:'bold',color:'#333'},userDetails:{fontSize:'18px',color:'#555',lineHeight:'1.6',textAlign:'left'},cartContainer:{marginTop:'20px',padding:'20px',backgroundColor:'#f9f9f9',borderRadius:'12px',boxShadow:'0 5px 10px rgba(0, 0, 0, 0.05)'},cartHeader:{fontSize:'20px',fontWeight:'bold',marginBottom:'10px'},cartList:{listStyleType:'none',padding:0},cartItem:{padding:'10px 0',borderBottom:'1px solid #e0e0e0',color:'#555'},loading:{textAlign:'center',fontSize:'20px',color:'#3498db',fontWeight:'bold'},error:{textAlign:'center',fontSize:'18px',color:'#e74c3c',fontWeight:'bold'},noData:{textAlign:'center',fontSize:'18px',color:'#888'}};if(loading)return/*#__PURE__*/_jsx(\"p\",{style:styles.loading,children:\"Loading...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{style:styles.error,children:error});if(!userData)return/*#__PURE__*/_jsx(\"p\",{style:styles.noData,children:\"No user profile found\"});return/*#__PURE__*/_jsxs(\"div\",{style:styles.container,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.header,children:/*#__PURE__*/_jsxs(\"h1\",{style:styles.userName,children:[\"Welcome, \",userData.name||'Guest',\"!\"]})}),/*#__PURE__*/_jsxs(\"div\",{style:styles.userDetails,children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name: \"}),userData.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",userData.email||'No email available']})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.cartContainer,children:[/*#__PURE__*/_jsx(\"h3\",{style:styles.cartHeader,children:\"Products Purchased\"}),userData.cart&&userData.cart.length>0?/*#__PURE__*/_jsx(\"ul\",{style:styles.cartList,children:userData.cart.map(item=>/*#__PURE__*/_jsxs(\"li\",{style:styles.cartItem,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Product ID:\"}),\" \",item.productId,\" | \",/*#__PURE__*/_jsx(\"strong\",{children:\"Quantity:\"}),\" \",item.quantity]},item._id))}):/*#__PURE__*/_jsx(\"p\",{children:\"No products found in cart.\"})]})]});}export default UserProfile;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","UserProfile","userData","setUserData","loading","setLoading","error","setError","id","localStorage","getItem","fetchUserData","response","get","concat","headers","data","console","log","err","_err$response","_err$response$data","message","styles","container","width","maxWidth","margin","marginTop","padding","background","borderRadius","boxShadow","textAlign","fontFamily","header","marginBottom","userName","fontSize","fontWeight","color","userDetails","lineHeight","cartContainer","backgroundColor","cartHeader","cartList","listStyleType","cartItem","borderBottom","noData","style","children","name","email","cart","length","map","item","productId","quantity","_id"],"sources":["C:/Users/Admin/Downloads/new codes/Ecomerence/src/components/UserProfile.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction UserProfile() {\r\n  const [userData, setUserData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const id = localStorage.getItem('user'); // The logged-in user's ID\r\n\r\n  useEffect(() => {\r\n    const fetchUserData = async () => {\r\n      try {\r\n        const response = await axios.get(`http://localhost:4000/api/userprofile/${id}`, {\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${localStorage.getItem('token')}` // Authorization header with JWT\r\n          }\r\n        });\r\n        setUserData(response.data);\r\n        console.log(response.data);\r\n      } catch (err) {\r\n        console.error('Error fetching user data:', err);\r\n        setError(err.response?.data?.message || 'Failed to load user profile. Please try again later.');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (id) {\r\n      fetchUserData();\r\n    }\r\n  }, [id]);\r\n\r\n  const styles = {\r\n    container: {\r\n      width: '100%',\r\n      maxWidth: '500px',\r\n      margin: '40px auto',\r\n      marginTop: '100px',\r\n      padding: '30px',\r\n      background: '#fff',\r\n      borderRadius: '16px',\r\n      boxShadow: '0 10px 20px rgba(0, 0, 0, 0.1)',\r\n      textAlign: 'center',\r\n      fontFamily: 'Arial, sans-serif',\r\n    },\r\n    header: {\r\n      marginBottom: '20px',\r\n    },\r\n    userName: {\r\n      fontSize: '28px',\r\n      fontWeight: 'bold',\r\n      color: '#333',\r\n    },\r\n    userDetails: {\r\n      fontSize: '18px',\r\n      color: '#555',\r\n      lineHeight: '1.6',\r\n      textAlign: 'left',\r\n    },\r\n    cartContainer: {\r\n      marginTop: '20px',\r\n      padding: '20px',\r\n      backgroundColor: '#f9f9f9',\r\n      borderRadius: '12px',\r\n      boxShadow: '0 5px 10px rgba(0, 0, 0, 0.05)',\r\n    },\r\n    cartHeader: {\r\n      fontSize: '20px',\r\n      fontWeight: 'bold',\r\n      marginBottom: '10px',\r\n    },\r\n    cartList: {\r\n      listStyleType: 'none',\r\n      padding: 0,\r\n    },\r\n    cartItem: {\r\n      padding: '10px 0',\r\n      borderBottom: '1px solid #e0e0e0',\r\n      color: '#555',\r\n    },\r\n    loading: {\r\n      textAlign: 'center',\r\n      fontSize: '20px',\r\n      color: '#3498db',\r\n      fontWeight: 'bold',\r\n    },\r\n    error: {\r\n      textAlign: 'center',\r\n      fontSize: '18px',\r\n      color: '#e74c3c',\r\n      fontWeight: 'bold',\r\n    },\r\n    noData: {\r\n      textAlign: 'center',\r\n      fontSize: '18px',\r\n      color: '#888',\r\n    },\r\n  };\r\n\r\n  if (loading) return <p style={styles.loading}>Loading...</p>;\r\n\r\n  if (error) return <p style={styles.error}>{error}</p>;\r\n\r\n  if (!userData) return <p style={styles.noData}>No user profile found</p>;\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <div style={styles.header}>\r\n        <h1 style={styles.userName}>Welcome, {userData.name || 'Guest'}!</h1>\r\n      </div>\r\n      <div style={styles.userDetails}>\r\n        <p><strong>Name: </strong>{userData.name}</p>\r\n        <p><strong>Email:</strong> {userData.email || 'No email available'}</p>\r\n        {/* <p><strong>COD Usage Count:</strong> {userData.codCount}</p> */}\r\n      </div>\r\n      <div style={styles.cartContainer}>\r\n        <h3 style={styles.cartHeader}>Products Purchased</h3>\r\n        {userData.cart && userData.cart.length > 0 ? (\r\n          <ul style={styles.cartList}>\r\n            {userData.cart.map((item) => (\r\n              <li key={item._id} style={styles.cartItem}>\r\n                <strong>Product ID:</strong> {item.productId} | <strong>Quantity:</strong> {item.quantity}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        ) : (\r\n          <p>No products found in cart.</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UserProfile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}